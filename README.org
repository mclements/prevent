#+title: Prevent software (adapted for Lazarus)
#+author: Original by Jan Barendregt (converted to Lazarus by Mark Clements)

* Introduction

- Jan Barendregt passed away on 3 June 2017. As per his last will and testament, his software has been released under GPL version 3.
- The Prevent software was developed by Jan Barendragt. The software is described in the PhD thesis by Louise Gunning Schepers: https://repub.eur.nl/pub/51053/881123_GUNNING-SCHEPERS-Louisa-Johanna.pdf. 
- Documentation has been included for the Prevent software as written in Delphi.  
- The Lazarus conversion is a work in progress.

* Issues with the Lazarus conversion
- [ ] Shutdown has a memory leak. Any help here would be appreciated.
- [ ] There are two versions for ~Tgenentity.pzaanpas~ -- one using a cohort perspective and one using an age-group perspective. See [[disunit.pas]].
- Much of the functionality is *not* working:
  + [ ] Population plot is not working.
  + [ ] PIFs and TIFs are not working:(. This is a key issue.

* Notes on the conversion to Lazarus (by Mark Clements)
- Lazarus provides some support for converting applications from Delphi to Lazarus.
- Aside from the automatic conversions, the main structural change was to replace the ~.mdb~ Access database inputs with ~.db~ SQLite database inputs.
- As a minor technical issue, the ~datamodule2.inputq1~ instance of the ~TSQLQuery~ object requires the ~packetsize~ property to be ~-1~ -- otherwise it defaults to only reads the first ten rows of a query:).
- We provide some R functions that uses [[https://github.com/mdbtools/mdbtools][mdb-tools]] and [[https://sqlite.org/][sqlite3]] utilities to convert the ~.mdb~ database files to ~.db~ database files.
